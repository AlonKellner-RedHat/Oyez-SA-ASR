# Generated by Claude
"""Tests for speaker_models module utilities."""

from oyez_sa_asr.speaker_models import (
    RecordingAppearance,
    TermStats,
    detect_role,
    slugify_name,
)


class TestSlugifyName:
    """Tests for slugify_name function."""

    def test_simple_name(self) -> None:
        """Convert simple name to slug."""
        assert slugify_name("John Smith") == "john_smith"

    def test_name_with_suffix(self) -> None:
        """Handle Jr., Sr. suffixes."""
        assert slugify_name("John G. Roberts, Jr.") == "john_g_roberts_jr"

    def test_name_with_special_chars(self) -> None:
        """Remove special characters."""
        assert slugify_name("O'Connor") == "oconnor"

    def test_multiple_spaces(self) -> None:
        """Collapse multiple spaces."""
        assert slugify_name("John   Smith") == "john_smith"

    def test_empty_name(self) -> None:
        """Handle empty name."""
        assert slugify_name("") == ""


class TestDetectRole:
    """Tests for detect_role function."""

    def test_chief_justice(self) -> None:
        """Detect Chief Justice role."""
        assert detect_role("Chief Justice John G. Roberts, Jr.") == "chief_justice"

    def test_justice(self) -> None:
        """Detect Justice role."""
        assert detect_role("Justice Sonia Sotomayor") == "justice"

    def test_mr_advocate(self) -> None:
        """Detect Mr. as advocate."""
        assert detect_role("Mr. John Smith") == "advocate"

    def test_ms_advocate(self) -> None:
        """Detect Ms. as advocate."""
        assert detect_role("Ms. Jane Doe") == "advocate"

    def test_mrs_advocate(self) -> None:
        """Detect Mrs. as advocate."""
        assert detect_role("Mrs. Jane Smith") == "advocate"

    def test_unknown_role(self) -> None:
        """Return unknown for unrecognized patterns."""
        assert detect_role("John Smith") == "unknown"

    def test_case_insensitive(self) -> None:
        """Role detection is case insensitive."""
        assert detect_role("JUSTICE THOMAS") == "justice"
        assert detect_role("chief justice roberts") == "chief_justice"


class TestTermStats:
    """Tests for TermStats dataclass."""

    def test_to_dict(self) -> None:
        """Convert to dictionary."""
        stats = TermStats(
            recordings=10,
            turns=100,
            duration_seconds=1234.5,
            word_count=5000,
        )
        result = stats.to_dict()
        assert result["recordings"] == 10
        assert result["turns"] == 100
        assert result["duration_seconds"] == 1234.5
        assert result["word_count"] == 5000


class TestRecordingAppearance:
    """Tests for RecordingAppearance dataclass."""

    def test_to_dict(self) -> None:
        """Convert to dictionary."""
        appearance = RecordingAppearance(
            term="2024",
            docket="23-1234",
            case_name="Smith v. Jones",
            transcript_type="oral_argument",
            turns=45,
            duration_seconds=678.9,
            word_count=4567,
        )
        result = appearance.to_dict()
        assert result["term"] == "2024"
        assert result["docket"] == "23-1234"
        assert result["case_name"] == "Smith v. Jones"
        assert result["transcript_type"] == "oral_argument"
        assert result["turns"] == 45
        assert result["duration_seconds"] == 678.9
        assert result["word_count"] == 4567
